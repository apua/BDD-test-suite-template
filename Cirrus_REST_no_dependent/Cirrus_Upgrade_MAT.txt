# pybot cmd:
#   pybot -v "VM name":"test" -v "TO_VERSION":"1.8.4" -v "UPGRADE_FILE":"test.bin" Cirrus_Upgrade_MAT.txt

*** Settings ***
Resource        ${CURDIR}/../resources/init_settings.txt
Test Setup      Login To Cirrus-CI

*** Variables ***
${CI_VSPHERE_IP}    10.30.1.79

*** Keywords ***
Login To Cirrus-CI
    Import Library  ${CURDIR}/../resources/EsxiLib.py    ip=${CI_VSPHERE_IP}    username=${VSPHERE_USERNAME}   password=${VSPHERE_PASSWORD}    WITH NAME   EsxiLib
    ${ip}=    EsxiLib.Get IP  vmname=cirrus-ci
    Import Library  ${CURDIR}/../resources/CirrusRESTLib.py    ip=${ip}    WITH NAME   Cirrus
    ${resp}=    Login Cirrus    ${CIRRUS_ADMIN_USERNAME}    ${CIRRUS_ADMIN_PASSWORD}
    Should Be Equal As Strings    ${resp}    200

*** Test Cases ***
Upgrade Cirrus-CI
    [Tags]      upgrade-ci  disabled
    ${result}=   Upgrade Appliance     ${TO_VERSION}      ${UPGRADE_FILE}
    Should Be Equal As Strings    ${result}    0
